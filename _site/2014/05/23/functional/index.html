<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title>
      
        Functional Programming &middot; PCS
      
    </title>

    <script type="text/javascript" src="../scripts/jquery-2.1.0.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="../css/master.css">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  </head>

  <body class="pure-g">
    <header class="pure-u-1">
      <nav class="pure-menu pure-menu-open pure-menu-horizontal">
        <ul>
          <li>
            <a href="/">JavaScript Evening</a>
          </li>
          <li>
            <a id="" href="/">About</a>
          </li>
          

          
          
            
              
            
          
            
              
                <li>
                  <a id="" href="/syllabus/">Syllabus</a>
                </li>
              
            
          
            
              
            
          
            
              
                <li>
                  <a id="" href="/curriculum/">Curriculum</a>
                </li>
              
            
          
            
          
            
              
                <li>
                  <a id="" href="/resources/">Resources</a>
                </li>
              
            
          
          <li>
            <a href="http://portlandcodeschool.com/" class="nav-item">PCS Home</a>
          </li>
        </ul>
      </nav>      
    </header>

    <section class="pure-u-1">
      <div class="post">
  <h1 class="post-title">Functional Programming</h1>
  <span class="post-date">23 May 2014</span>
  <span class="post-slides">

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

</span>

  <p>Today we&#39;re going to discuss functions again. Again? Yes, functions are the
building blocks of pretty much everything we&#39;re doing. So we&#39;re going to learn
some more tricks with functions before we move on.</p>

<p><aside>
Today will stretch your mind. It may be fun, it may be painful. Keep a good
mindset. It&#39;s okay if it doesn&#39;t stick at first. We can review and discuss
again. You may find yourself thinking, <em>why does this matter?</em> Understanding
the contents of todays class will make you a better programmer. Have faith.
</aside></p>

<h2>Just Like Everything Else</h2>

<p>JavaScript treats functions just like other objects. In fact, in JavaScript,
they are objects (which we&#39;ll touch on shortly). You can pass them as arguments
to functions just like strings, numbers, booleans, and objects. You can assign
them to variables. You can return them from functions. Languages are said to
have <em>first class functions</em> when they treat them like other values. This can
feel very natural if you learn this early in your programming career.</p>

<p>What this means as a programmer is that we can build great abstractions with
functions. This has been done since the 1950s in functional programming
languages. We&#39;re starting to see a renewed interest in functional programming
and functional concepts added to languages that didn&#39;t have them originally.
Programming languages like Lisp (of which Clojure is a dialect), Haskell,
Erlang, and F# are primarily functional.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">// functions can be assigned to variables
var foo = function() {
  
};

// functions can be passed as arguments
setTimeout(function() {
}, 1000);

// functions can be assigned to properties of objects
var utilities = {
  foo: function() {

  }
};
utilities.bar = function() {
  
};
utilities[&quot;baz&quot;] = function() {
  
};

// functions can be returned from functions
var foo = function() {
  return function() {

  };
};</code></pre></div>

<p>Regardless of whether or not you see a use case for everything above, do all
of these examples make sense? Do you understand the syntax?</p>

<p>We&#39;re going to start building some abstractions now!</p>

<p><aside>
<strong>Functional, Imperative, Procedural, and Object Oriented</strong></p>

<p>JavaScript is a multi-paradigm programming language. What that means is that
it incorporates many different programming paradigms. Because it has first
class functions, we can apply patters from functional programming languages.</p>

<p>Through the use of statements, we can approach JavaScript as an imperative
language, where statements are used to alter the state of execution. Functions
and modules make it procedural as well.</p>

<p>Finally, it uses objects and allows us to apply object oriented principles.
</aside></p>

<h2>Memoize</h2>

<p>The following is a function to get the n<sup><small>th</small></sup> Fibonacci number.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">/**
 * Find the nth (zero-indexed) Fibonacci number.
 */
var fibonacci = function(n) {
  return n &gt; 1 ? fibonacci(n - 1) + fibonacci(n - 2) : 1;
};
console.log(fibonacci(Number(process.argv[2])));</code></pre></div>

<p>It takes 1.5 seconds on my computer to generate the 40th Fibonacci number:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">$ time node fibonacci.js 40
102334155

real  0m1.547s
user  0m1.533s
sys 0m0.020s</code></pre></div>

<p>Why is this so slow? And how can we make it faster?</p>

<p>Note that <code>memoize</code> will only work with functions that have no side effects
(that is, they do not alter the program&#39;s state) and return a consistent result
for a given input.</p>

<h3>Challenge</h3>

<ul>
<li>Abstract the shared logic of the speed enhancements that we made.</li>
</ul>

<h2>Once</h2>

<p>Another useful function, <code>once</code>, does just what you would think. It will only
allow something to happen once.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var findTrueLove = once(function() {
  console.log(&quot;Looking for true love...&quot;);
});

findTrueLove(); //-&gt; Looking for true love...
findTrueLove(); //=&gt; undefined</code></pre></div>

<h3>Challenge</h3>

<ul>
<li>Implement the <code>once</code> function.</li>
</ul>

<h2>Partials &amp; Currying</h2>

<p>Partially applying a function allows you to create new functions easily that
lock in arguments with specific values.</p>

<p>For instance:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var greet = function(greeting, name) { return greeting + &#39; &#39; + name; };
var hi = _.partial(greet, &#39;hi&#39;);
hi(&#39;fred&#39;); //=&gt; &#39;hi fred&#39;</code></pre></div>

<p>Basically, calling <code>_.partial</code> on <code>greet</code> locks in the value of the <code>greeting</code>
parameter. The function, <code>hi</code>, that&#39;s returned from <code>_.partial</code> can be called
with any remaining arguments. In this case that&#39;s just name <code>name</code>. Calling
<code>hi</code> will put all the arguments together properly and result in a call to the
original function, <code>greet</code>, as if it had been called like so:
<code>greet(&#39;hi&#39;, &#39;fred&#39;)</code>.</p>

<p>You&#39;ll often hear currying and partial application used as synonyms, but
they&#39;re actually slightly different. A curry of the <code>greet</code> function would
look like this (note the location of parenthesis):</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var greet = function(greeting, name) { return greeting + &#39; &#39; + name; };
var hi = _.curry(greet)(&#39;hi&#39;);
hi(&#39;fred&#39;); //=&gt; &#39;hi fred&#39;</code></pre></div>

<p>These functions can be incredibly useful building blocks.</p>

<p>Let&#39;s take a look at how you might implement a <code>partial</code> function:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var partial = function(/* args */) {
  // implementation
};

var greet = function(greeting, name) {
  return greeting + &#39; &#39; + name;
};

var hi = partial(greet, &#39;hi&#39;);

console.log(hi(&#39;Whitney&#39;));</code></pre></div>

<p>The result that we&#39;ll build will be only a starting place. We don&#39;t have all
of the tools we need to build a great version of <code>partial</code>. Later we&#39;ll come
back to this and make it work far better.</p>

<h3>Challenge</h3>

<ul>
<li>Using partial application, define a function, <code>squareAll</code> returns a new
array containing squares of the items in the array. Hint: there&#39;s another
function that we&#39;ve discussed that does part of this already.</li>
</ul>

<h2>Filter</h2>

<p>The <code>filter</code> function is another that does just what you would think. It
filters items out of an array. It&#39;s a little like <code>map</code> except that you
have to return <code>true</code> or <code>false</code> form your function. When the function
returns <code>true</code>, the value is included in the resulting array.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var numbers = [1, 2, 3, 4, 5, 6];
var evenNumbers = _.filter(numbers, function(n) { return (n % 2) === 0; });</code></pre></div>

<h3>Challenge</h3>

<ul>
<li>Implement the <code>filter</code> function.</li>
</ul>

<h2>Reduce/Fold</h2>

<p>The <code>reduce</code> (or <code>fold</code>) function is one of the most conceptually complicated
abstractions that we&#39;ll look at.</p>

<p>Let&#39;s say we want to sum the numbers in an array:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var numbers = [1, 2, 3, 4, 5, 6];
var sum = 0;
numbers.forEach(function(n) {
  sum += n;
});
sum; //=&gt; 21</code></pre></div>

<p>But concatenating an array of strings could look the same:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var strings = [&#39;hello&#39;, &#39; &#39;, &#39;world&#39;];
var result = &#39;&#39;;
strings.forEach(function(s) {
  result += s;
});
result; //=&gt; &#39;hello world&#39;</code></pre></div>

<p>As could concatenating an array of arrays:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var arrays = [[10], [&#39;string&#39;], [{}]];
var result = [];
arrays.forEach(function(a) {
  result = result.concat(a);
});
result; //=&gt; [10, &#39;string&#39;, {}]</code></pre></div>

<p>Let&#39;s discuss what&#39;s shared between each of these functions so we can figure
out how an abstraction for this will work.</p>

<p>Don&#39;t peek below before we discuss. :)</p>

<div style="height: 200px;"></div>

<p>Space intentionally left blank.</p>

<div style="height: 200px;"></div>

<p>Really, no peeking! :)</p>

<div style="height: 200px;"></div>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var numbers = [1, 2, 3, 4, 5, 6];
var sum = _.reduce(numbers, function(sum, n) { return sum + n; }, 0);

var strings = [&#39;hello&#39;, &#39; &#39;, &#39;world&#39;];
var string = _.reduce(strings, function(concatenated, s) { return concatenated + s; }, &#39;&#39;);

var arrays = [[10], [&#39;string&#39;], [{}]];
var array = _.reduce(arrays, function(concatenated, a) { return concatenated.concat(a); }, []);</code></pre></div>

<p>The concept behind this abstraction is that you have an array of items that
need to be reduced (or folded if that word makes more sense to you) until it&#39;s
just a single item.</p>

<p>You&#39;ll generally have a starting object, and for each reduction, you&#39;ll be
transforming that object into something new (or simply altering it). After all
transformations, you&#39;ll have the resulting object.</p>

<h2>Chaining</h2>

<p>Chaining tends to be pretty common in JavaScript. We&#39;ll learn later about
chaining with jQuery and when using promises. Chaining tends to be a little
less useful with libraries like <a href="http://lodash.com">Lo-Dash</a> and <a href="http://underscorejs.org/">Underscore</a>,
but can still be useful.</p>

<p>With <code>_</code>, you create a chain which can then be used to apply a bunch of
transformations back to back. For this to work, <code>_</code> creates a <em>wrapper object</em>
that it returns from <code>chain</code>. Each chainable call returns a wrapper object as
well. When you&#39;re finished with the chain, you get a useful value back by
calling <code>value</code>.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var characters = [
  { &#39;name&#39;: &#39;barney&#39;,  &#39;age&#39;: 36 },
  { &#39;name&#39;: &#39;fred&#39;,    &#39;age&#39;: 40 },
  { &#39;name&#39;: &#39;pebbles&#39;, &#39;age&#39;: 1 }
];

var youngest = _.chain(characters)
    .sortBy(&#39;age&#39;)
    .map(function(chr) { return chr.name + &#39; is &#39; + chr.age; })
    .first()
    .value();
//=&gt; &#39;pebbles is 1&#39;

// without chain
youngest = _.first(_.map(_.sortBy(characters, &#39;age&#39;), function(chr) { return chr.name + &#39; is &#39; + chr.age; }));</code></pre></div>

<p>We&#39;re not going to explore chaining in detail right now, but it&#39;s worth noting
that it exists in <code>_</code>.</p>

<h3>Challenge</h3>

<p>Use <code>reduce</code> to transform an array of <em>tuples</em> into an object.</p>

<p><aside class="objective"></p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var pairs = [[&#39;name&#39;, &#39;JSI&#39;], [&#39;location&#39;, { city: &#39;Portland&#39;, &#39;state&#39;: &#39;OR&#39; }], [&#39;school&#39;, &#39;PCS&#39;]];
_.reduce(pairs, /* other reduce args */);
//=&gt; { name: &#39;JSI&#39;, location: { city: &#39;Portland&#39;, state: &#39;OR&#39; }, school: &#39;PCS&#39; }</code></pre></div>

<p></aside></p>

<p>If you&#39;re able to get this quickly, create a function to do the same thing.</p>

<p>In <code>_</code>, this function is called <code>zipObject</code> and is so named because of its
relation to <code>zip</code> which we may explore later.</p>

<p><aside>
The formal term for <em>zip</em> is <a href="http://en.wikipedia.org/wiki/Convolution_(computer_science)">convolution</a>.
</aside></p>

<h2>More (Challenge)</h2>

<p>There are so many more abstractions that can be built and used to our
advantage!</p>

<p>Choose one of the below functions from <a href="http://lodash.com">Lo-Dash</a>. Learn what it does
well enough to explain it to the group. Come up with some examples that
clearly and logically illustrate how it works. When would you want to use it?
When might you avoid using it? Why?</p>

<ul>
<li><a href="http://lodash.com/docs#flatten"><code>flatten</code></a></li>
<li><a href="http://lodash.com/docs#zip"><code>zip</code></a></li>
<li><a href="http://lodash.com/docs#union"><code>union</code></a> &amp; <a href="http://lodash.com/docs#intersection"><code>intersection</code></a></li>
<li><a href="http://lodash.com/docs#uniq"><code>unique</code></a></li>
<li><a href="http://lodash.com/docs#xor"><code>xor</code></a></li>
<li><a href="http://lodash.com/docs#groupBy"><code>groupBy</code></a>, <a href="http://lodash.com/docs#indexBy"><code>indexBy</code></a> &amp; <a href="http://lodash.com/docs#countBy"><code>countBy</code></a></li>
<li><a href="http://lodash.com/docs#some"><code>some</code></a> &amp; <a href="http://lodash.com/docs#every"><code>every</code></a></li>
<li><a href="http://lodash.com/docs#at"><code>at</code></a></li>
<li><a href="http://lodash.com/docs#after"><code>after</code></a></li>
<li><a href="http://lodash.com/docs#throttle"><code>throttle</code></a></li>
<li><a href="http://lodash.com/docs#defaults"><code>defaults</code></a> &amp; <a href="http://lodash.com/docs#merge"><code>merge</code></a></li>
<li><a href="http://lodash.com/docs#values"><code>values</code></a> &amp; <a href="http://lodash.com/docs#keys"><code>keys</code></a></li>
</ul>

<p>Once you understand how the function works, try re-implementing it yourself.
Some of these may be difficult to re-implement. Don&#39;t worry if you can&#39;t do it.
Sometimes taking the time to think through how the function was built will
increase your understanding of how it works.</p>

</div>



    </section>

    <footer class="pure-u-1">
      &copy; 2014. All rights reserved.
      <span>v0.0.1</span>
    </footer>
  </body>
</html>
