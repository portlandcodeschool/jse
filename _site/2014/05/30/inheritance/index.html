<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title>
      
        Inheritance &middot; PCS
      
    </title>

    <script type="text/javascript" src="../scripts/jquery-2.1.0.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="../css/master.css">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  </head>

  <body class="pure-g">
    <header class="pure-u-1">
      <nav class="pure-menu pure-menu-open pure-menu-horizontal">
        <ul>
          <li>
            <a href="/">JavaScript Evening</a>
          </li>
          <li>
            <a id="" href="/">About</a>
          </li>
          

          
          
            
              
            
          
            
              
                <li>
                  <a id="" href="/syllabus/">Syllabus</a>
                </li>
              
            
          
            
              
            
          
            
              
                <li>
                  <a id="" href="/curriculum/">Curriculum</a>
                </li>
              
            
          
            
          
            
              
                <li>
                  <a id="" href="/resources/">Resources</a>
                </li>
              
            
          
          <li>
            <a href="http://portlandcodeschool.com/" class="nav-item">PCS Home</a>
          </li>
        </ul>
      </nav>      
    </header>

    <section class="pure-u-1">
      <div class="post">
  <h1 class="post-title">Inheritance</h1>
  <span class="post-date">30 May 2014</span>
  <span class="post-slides">

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

</span>

  <p>What happens when one object is like another? How can we re-use the code that&#39;s
similar between the two objects?</p>

<h2>Extending Classes</h2>

<p>Creating a class by <em>extending</em> all of the functionality of another class is
called <em>inheritance</em> or <em>subclassing</em>. So when and how do we do this?</p>

<p>Let&#39;s say we have a class <code>Fruit</code>. We want to create two new classes <code>Apple</code>
and <code>Banana</code>. We&#39;d be able to do things like:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var banana = new Banana();

// banana properties
banana.edible(); //=&gt; true
banana.compostable(); //=&gt; true
banana.genus(); //=&gt; &#39;musa&#39;
banana.epicarp(); //=&gt; &#39;peel&#39;
banana.mesocarp(); //=&gt; &#39;inner peel&#39;
banana.endocarp(); //=&gt; &#39;yummy banana&#39;
banana.calories(); //=&gt; 105
banana.color(); //=&gt; &#39;yellow&#39;

// banana methods
banana.peel();

// apple properties
var apple = new Apple();
apple.edible(); //=&gt; true
apple.compostable(); //=&gt; true
apple.genus(); //=&gt; &#39;malus&#39;
apple.epicarp(); //=&gt; &#39;skin&#39;
apple.mesocarp(); //=&gt; &#39;yummy apple&#39;
apple.endocarp(); //=&gt; &#39;core&#39;
apple.calories(); //=&gt; 95
apple.color(); //=&gt; &#39;red&#39; (yes, in this world, all apples are red)

// apple methods
apple.core();
apple.slice();</code></pre></div>

<p>There&#39;s a lot of things that are common properties for each of these two
fruits. We shouldn&#39;t have to re-define functionality that&#39;s shared between the
two. So we&#39;ll <em>extend</em> <code>Fruit</code> to create <code>Apple</code> and <code>Banana</code>.</p>

<p>Let&#39;s look at how this is done in a few other languages first:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"># ruby
class Fruit &lt; Object
end
class Apple &lt; Fruit
end
class Banana &lt; Fruit
end</code></pre></div>

<div class="highlight"><pre><code class="language-python" data-lang="python"># python
class Fruit(object):
  pass # no implementation (yet)
class Apple(Fruit):
  pass
class Banana(Fruit):
  pass</code></pre></div>

<div class="highlight"><pre><code class="language-c--" data-lang="c++">// c++
class Fruit {
};
class Apple : Fruit {
};
class Banana : Fruit {
};</code></pre></div>

<div class="highlight"><pre><code class="language-java" data-lang="java">// java
public class Fruit {
}
public class Apple extends Fruit {
}
public class Banana extends Fruit {
}</code></pre></div>

<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c">// objective-c
@interface Fruit : NSObject
@end
@interface Apple : Fruit
@end
@interface Banana : Fruit
@end</code></pre></div>

<p>Now that we&#39;ve seen how simple it is in other languages, let&#39;s look at JavaScript:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">function Fruit() {}

function Apple() {}
function ApplePrototype() {}
ApplePrototype.prototype = Fruit.prototype;
Apple.prototype = new ApplePrototype();
Apple.prototype.constructor = Apple;

function Banana() {}
function BananaPrototype() {}
BananaPrototype.prototype = Fruit.prototype;
Banana.prototype = new BananaPrototype();
Banana.prototype.constructor = Banana;</code></pre></div>

<p>Don&#39;t even try to understand this. It&#39;s a mess!</p>

<p>This is the technically correct way to write objects that inherit from others
in JavaScript. Until recently, there wasn&#39;t even a built in shorthand for this.
Some people wrote their own abstraction, <code>Object.create</code>:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">// Object.create Polyfill (MDN has a better version of this)
if (typeof Object.create !== &#39;function&#39;) {
  Object.create = function (o) {
    function F() {}
    F.prototype = o;
    return new F();
  };
}</code></pre></div>

<p>Again, don&#39;t worry about understanding that code. <code>Object.create</code> is built in
to Node. This is just to give you history/background. You&#39;ll see class
extension done in various different ways in JS.</p>

<p>Using this abstraction, we can do better, but it&#39;s still not wonderful in
JavaScript:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">function Fruit() {}

function Apple() {}
Apple.prototype = Object.create(Fruit.prototype);
Apple.prototype.constructor = Apple;

function Banana() {}
Banana.prototype = Object.create(Fruit.prototype);
Banana.prototype.constructor = Banana;</code></pre></div>

<h2>Challenge</h2>

<ul>
<li><p>Implement the following constructors/methods:</p>

<ul>
<li><code>Fruit</code></li>
<li><code>Fruit.prototype.edible</code></li>
<li><code>Fruit.prototype.compostable</code></li>
<li><code>Fruit.prototype.genus</code></li>
<li><code>Fruit.prototype.epicarp</code></li>
<li><code>Fruit.prototype.mesocarp</code></li>
<li><code>Fruit.prototype.endocarp</code></li>
<li><code>Fruit.prototype.calories</code></li>
<li><code>Fruit.prototype.setCalories</code></li>
<li><code>Fruit.prototype.color</code></li>
<li><code>Fruit.prototype.setColor</code></li>
<li><code>Apple</code></li>
<li><code>Apple.prototype.core</code> &rarr; log <code>&#39;The red apple is being cored&#39;</code></li>
<li><code>Apple.prototype.slice</code> &rarr; log <code>&#39;The red apple is being peeled&#39;</code></li>
<li><code>Banana</code></li>
<li><code>Banana.prototype.peel</code> &rarr; log <code>&#39;The yellow banana is being peeled&#39;</code></li>
</ul></li>
</ul>

<h2>Overriding Methods &amp; Calling Super</h2>

<p>Sometimes you may create a subclass, implement a method, but use methods
defined on the class your extending (also called the <em>superclass</em> or
<em>parent class</em>).</p>

<p>For instance, perhaps there&#39;s a method you want to implement,
<code>Fruit.prototype.prepareForEating</code> so that any fruit can be prepared to be
eaten. For an apple, nothing needs to be done. But a banana needs to be peeled.</p>

<p>Let&#39;s take a look:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">Fruit.prototype.prepareForEating = function() {
  // nothing needs to be done by default to prepare fruit
  // to be eaten.
};

Banana.prototype.prepareForEating = function() {
  // we need to peel the banana now
};

var apple = new Apple();
apple.prepareForEating();

var banana = new Banana();
banana.prepareForEating();</code></pre></div>

<p>The <code>prepareForEating</code> method on <code>Banana</code> <em>overrides</em> the implementation of
<code>prepareForEating</code> on the <em>base class</em>, <code>Fruit</code>.</p>

<p>But eventually, we may come along and enhance what it means to prepare any
fruit for eating by altering the method on the base class.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">Fruit.prototype.prepareForEating = function() {
  var safe = true;
  if (this.isRotten()) { safe = false; }
  else if (this.hasMold()) { safe = false; }
  return safe;
};

var person = new Person();
var apple = new Apple();
if (apple.prepareForEating()) {
  person.eat(apple);
}

var banana = new Banana();
if (banana.prepareForEating()) {
  person.eat(banana);
}</code></pre></div>

<p>This assumes that <code>Fruit.prototype.isRotten</code> and <code>Fruit.prototype.hasMold</code> are
methods that have been defined.</p>

<h3>Discussion</h3>

<p>There are a few things wrong with this code now that we&#39;ve extended the base
class implementation. What are these problems and how do we fix them? Don&#39;t
actually fix them just yet, but how would they be addressed? Work with the code
a little to try to understand what the problems are.</p>

<h3>Challenge</h3>

<p>Model the classroom using object oriented design principles.</p>

<ul>
<li>Start with just a few objects.</li>
<li>Can you use sub-classing for any of these objects?</li>
<li>Try to figure out a method that would make sense for a subclass to override.
Would you need to call super when you override those methods?</li>
</ul>

<h2>Abuse of Inheritance</h2>

<p>Let&#39;s say you have a class, <code>Page</code>. This class defines methods like:</p>

<ul>
<li><code>Page.prototype.words()</code></li>
<li><code>Page.prototype.margins()</code></li>
<li><code>Page.prototype.font()</code></li>
<li><code>Page.prototype.pageNumber()</code></li>
</ul>

<p>You now have a building block with which you can build some cool stuff.</p>

<p>So how about a newspaper article? We&#39;ll that&#39;s just a page, right?</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">function Article() { Page.apply(this, arguments); }
Article.prototype = Object.create(Page.prototype);
Article.prototype.constructor = Article;</code></pre></div>

<p>And a book is really just one really long page, right?</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">function Book() { Page.apply(this, arguments); }
Book.prototype = Object.create(Page.prototype);
Book.prototype.constructor = Book;</code></pre></div>

<p><em>Wrong!</em></p>

<p>Why is this wrong? Well because you&#39;re using the wrong tool for the job. Just
because you have a hammer does not make everything a nail.</p>

<h3><em>Is a</em> vs <em>has a</em></h3>

<p>A book certainly isn&#39;t just a page. It&#39;s a collection of many pages. It
<em>has many</em> pages. You wouldn&#39;t go home and tell your mom that what you learned
in school today was that a book <em>is a</em> page. You&#39;d sound like a fool. But
a book does <em>have a</em> page.</p>

<p>This is pretty simple, but the newspaper article gets a little more tricky.</p>

<p>A newspaper article could be a single page. It could span multiple pages. In
fact, it could be one of many articles on a page. When you really think about
it, though, it doesn&#39;t make sense for a page to <em>have an</em> article. The page
object we already have is trying to represent a really basic bit of prose.
Perhaps it&#39;s a way of breaking up a long flow of text into multiple sections
based on how it fits within the confines of the margins. It&#39;s certainly not
representing complex newspaper layouts with articles, ads, etc.</p>

<p>Therefore, the following code better represents our article scenario:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">function Article() {
  this._pages = []; // an array of Page objects
}

function Layout() {
  this._articles = []; // an array of Article objects
  this._advertisements = []; // an array of Advertisement objects
  this._arrangment = {}; // something to represent arrangement of everything
}

function NewspaperPage() {
  this._layout; // a Layout object, how to lay out the page
  this._pageNumber; // page number
}</code></pre></div>

<p>This example is slightly far-fetched. This is not <em>the right</em> representation
of the relationship between these objects. There is no <em>right</em> representation.
Depending on the application and how these objects will be used, you could come
up with hundreds of configurations.</p>

<p>It should help you understand, however, that there are cases in which
inheritance is not the right choice. Instead, you can build complex
relationships between objects by <em>composition</em> as illustrated above.</p>

<p>Crafting the proper set of objects to represent objects in the real world can
quickly become complicated and confusing. Using objects to model abstract
processes and concepts is even more difficult. It&#39;s a skill you&#39;ll continue to
develop throughout your development career.</p>

<p><aside>
<strong>Object Oriented Design</strong></p>

<p>You&#39;ll hear this term a lot. Programmers use the term a lot. You need to know
it. Technically, its a design pattern that prescribes the use of objects to
model systems and create applications. In practice, it has many different
meanings. The nuance between the meaning will depend on the context and the
conversation.</p>

<p>Some people just mean defining an object here or there. Our <code>Person</code> example
would suffice. That was object oriented design.</p>

<p>Some people will use it and be talking about building complex applications
using object oriented principles and pushing those principles to the limits.
They&#39;ll potentially over-use inheritance and build classes with crazy names
that do funny things. They&#39;ll throw a bunch of other design patterns on top
&mdash; factories, abstract base classes, builders, bridges, adapters, etc.</p>

<p>This is not wrong. It&#39;s usually the language that dictates to what extent these
principles and patterns enter a programmers arsenal and vocabulary. Java and
C++ programmers tend to use these ideas far more heavily. The language
facilitates it, and the community embraces it. JavaScript doesn&#39;t need to rely
heavily on objects to get things done. Some frameworks use objects far more
than others, though. This is either to make them easier to use or to make them
more approachable.</p>

<p>Obviously, don&#39;t take this as gospel and repeat it everywhere. No one way of
approaching problems is right. JavaScript isn&#39;t better than C++. They&#39;re
different. Using object oriented principles to solve problems in JavaScript is
not wrong, it&#39;s just not required. Just solve the problem and write clear code.</p>

<p>Bottom line: you need to know about object oriented design, but the truth is,
you won&#39;t use it in JavaScript as much as you might think. And many programmers
over-use object oriented concepts (don&#39;t tell them that, though).
</aside></p>

</div>



    </section>

    <footer class="pure-u-1">
      &copy; 2014. All rights reserved.
      <span>v0.0.1</span>
    </footer>
  </body>
</html>
