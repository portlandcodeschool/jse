<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title>
      
        User Input & Serialization &middot; PCS
      
    </title>

    <script type="text/javascript" src="../scripts/jquery-2.1.0.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="../css/master.css">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  </head>

  <body class="pure-g">
    <header class="pure-u-1">
      <nav class="pure-menu pure-menu-open pure-menu-horizontal">
        <ul>
          <li>
            <a href="/">JavaScript Evening</a>
          </li>
          <li>
            <a id="" href="/">About</a>
          </li>
          

          
          
            
              
            
          
            
              
                <li>
                  <a id="" href="/syllabus/">Syllabus</a>
                </li>
              
            
          
            
              
            
          
            
              
                <li>
                  <a id="" href="/curriculum/">Curriculum</a>
                </li>
              
            
          
            
          
            
              
                <li>
                  <a id="" href="/resources/">Resources</a>
                </li>
              
            
          
          <li>
            <a href="http://portlandcodeschool.com/" class="nav-item">PCS Home</a>
          </li>
        </ul>
      </nav>      
    </header>

    <section class="pure-u-1">
      <div class="post">
  <h1 class="post-title">User Input & Serialization</h1>
  <span class="post-date">20 May 2014</span>
  <span class="post-slides">

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

</span>

  <h2>User Input</h2>

<p>Sometimes, you&#39;ll want to build a command line app that asks the user a
question.</p>

<p>Node makes this a little complicated, but it&#39;s not too difficult. Here&#39;s some
code taken directly from <a href="http://nodejs.org/api/readline.html">Node&#39;s <code>readline</code> documentation</a>.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var readline = require(&#39;readline&#39;);

var rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

rl.question(&quot;What do you think of node.js? &quot;, function(answer) {
  // TODO: Log the answer in a database
  console.log(&quot;Thank you for your valuable feedback:&quot;, answer);

  rl.close();
});</code></pre></div>

<p>The most cryptic part of this example code is <code>process.stdin</code> and
<code>process.stdout</code>. These are the <em>standard input</em> and <em>standard output</em> of your
app. The standard input is the input that the user provides to your app, and
the standard output is the information you provide back to the user (often by
using <code>console.log</code>).</p>

<p>Any questions?</p>

<h4>Quick Status Check</h4>

<p>Write a simple command line app that prompts the user for one number,
then prompts for a second, then reports the sum.</p>

<h2>Serialization</h2>

<p>Serialization is the process of converting data &mdash; objects, strings,
numbers, booleans, etc. into a format that can be <em>persisted</em>, or stored
somehow. Usually the first step will be converting that data into a <em>stream</em> of
bytes (which is pretty much the same as a string). We&#39;ll be storing serialized
data in files.</p>

<p>The reverse, deserialization, simply converts that stream of data back into
usable objects.</p>

<h3>Formats</h3>

<p>There&#39;s an endless number of formats into which you can serialize data. Some
popular ones available to most programming languages are:</p>

<ul>
<li>JSON</li>
<li>XML</li>
<li>YAML</li>
</ul>

<p>We&#39;re going to focus on JSON which was designed with JavaScript in mind and has
exploded in popularity.</p>

<h3>JSON</h3>

<p>JSON stands for JavaScript Object Notation. The format of the serialized data
is nearly identical to the code you&#39;d write in JavaScript. Actually, it is
valid JavaScript. This makes it really easy for web browsers to convert back
into objects since they already know how to <em>parse</em> JavaScript.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var object = [
  { firstName: &quot;Whitney&quot;, lastName: &quot;Young&quot; },
  { firstName: &quot;Cris&quot;, lastName: &quot;Kelly&quot; }
];
JSON.stringify(object)</code></pre></div>

<p>The result is the following string:<br>
<code>&#39;[{&quot;firstName&quot;:&quot;Whitney&quot;,&quot;lastName&quot;:&quot;Young&quot;},{&quot;firstName&quot;:&quot;Cris&quot;,&quot;lastName&quot;:&quot;Kelly&quot;}]&#39;</code></p>

<p>That&#39;s nearly exactly what we typed in! Now, though, it&#39;s a string. So we can
save it to a file.</p>

<p><aside>
<strong>XML Example</strong></p>

<p>There&#39;s no strict rule to how XML should be structured in order to represent
objects. You can basically create whatever structure you want, and it can be
different for each application. The above object could be written out as the
following XML document:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;root&gt;
  &lt;people&gt;
    &lt;person firstName=&quot;Whitney&quot; lastName=&quot;Young&quot; /&gt;
    &lt;person firstName=&quot;Cris&quot; lastName=&quot;Kelly&quot; /&gt;
  &lt;/people&gt;
&lt;/root&gt;
</code></pre></div>
<p>XML&#39;s flexibility also makes it a little more annoying to work with. <code>people</code>
could have been called anything, for instance <code>array</code>. We could have skipped
the <code>root</code> element in the example above.</p>

<p>An application that receives an XML file like this needs to account for the
exact structure of the XML and generally manipulates it through an XML
library. With JSON, there can still be structural differences, but you&#39;re
generally working with built in types (strings, arrays,
objects/hashes/dictionaries, booleans, and numbers) which makes accessing and
manipulating the data easier.
</aside></p>

<p>Reading JSON from a file couldn&#39;t be easier in Node. If you name a file with
a JSON extension, <code>information.json</code>, you can simply <code>require</code> the file, so
<code>require(&#39;path/to/informaiton&#39;)</code> or <code>require(&#39;path/to/informaiton.json&#39;)</code>.</p>

<h4>Quick Status Check</h4>

<p>Write an app that reads the following file and logs the message.</p>

<p><em>message.json</em></p>

<div class="highlight"><pre><code class="language-json" data-lang="json">{
  &quot;message&quot;: &quot;This message is stored in the JSON file.&quot;
}</code></pre></div>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">$ ./show-message message.json
This message is stored in the JSON file.</code></pre></div>

<h2>Adventure Game</h2>

<p>Now that we can read files and accept user input, we can build something pretty
fun.</p>

<p>This game will be a simple game to try to find a treasure by navigating a bunch
of rooms. This is basically a maze, but the player plays blind, only knowing
which direction they can go.</p>

<p>You can give this game whatever spin you want to: castles, dungeons, space
ships, etc. Try to have fun with it!</p>

<p><aside class="objective">
Here&#39;s an example of how your game might work:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ ./adventure-game game1.json
You are standing in a room. There are three doors.
One is to the north, one is to the east, one is to the west.
Which direction do you want to go? west

You are standing in a room. There are two doors.
One is to the north, one is to the east.
Which direction do you want to go? north

You are standing in a room. There are two doors.
One is to the north, one is to the south.
Which direction do you want to go? north

You are standing in a room. There are two doors.
One is to the north, one is to the south.
Which direction do you want to go? north

You are standing in a room. There are two doors.
One is to the east, one is to the south.
Which direction do you want to go? east

You are standing in a room. There are two doors.
One is to the east, one is to the west.
Which direction do you want to go? east

You are standing in a room. There are two doors.
One is to the east, one is to the west.
Which direction do you want to go? east

You found the treasure!
</code></pre></div>
<p></aside></p>

<p>The above game was played on the following map. The input file that produced
this map can be found along with a library that does some game related stuff in
the <a href="https://github.com/portlandcodeschool/jsi-gamelib">JSI Game Library</a>.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">+---------+---------+---------+---------+
|         |         |         |         |
|    H         I         J         K    |
|         |         |         |         |
+---   ---+---------+---------+---------+
|         |                              
|    G    |                              
|         |                              
+---   ---+---------+---------+          
|         |         |         |          
|    D    |    E         F    |          
|         |         |         |          
+---   ---+---   ---+---------+          
|         |         |         |          
|    A         B         C    |          
|         |         |         |          
+---------+--  ^  --+---------+          
</code></pre></div>
<p>The game library can be installed with:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">npm install --save git+ssh://git@github.com:portlandcodeschool/jsi-gamelib.git
</code></pre></div>
<h3>Challenges</h3>

<ul>
<li><p>Create another map or extend the existing map.</p></li>
<li><p>Consider using <a href="https://github.com/flatiron/prompt">prompt</a> or <a href="https://github.com/sindresorhus/chalk">chalk</a> to spice up your game.</p></li>
<li><p>Make your game more interesting by adding things to the rooms. For instance,</p></li>
</ul>

<blockquote>
<p>You&#39;re in a room with a cactus. Not much is going on.</p>

<p>You&#39;re in a room with a fire breathing dragon! You better leave quickly.
He looks hungry!</p>
</blockquote>

<ul>
<li><p>Fix any <a href="https://github.com/portlandcodeschool/jsi-gamelib/issues">issues</a> you find in the JSI Game
Library.</p></li>
<li><p><strong>Advanced:</strong> Allow things to be picked up and used in order to get through
certain rooms. For instance,</p></li>
</ul>

<blockquote>
<p>You&#39;re in a room with a fire breathing dragon, but you brought a cactus
with you. You throw the cactus at the dragon. He gets scared and hides.
The door to the north is now accessible.</p>
</blockquote>

<p>This will require some thought as to how you&#39;ll want to change the structure
  of the game file in order to allow carrying and applying items in different
  circumstances.</p>

</div>



    </section>

    <footer class="pure-u-1">
      &copy; 2014. All rights reserved.
      <span>v0.0.1</span>
    </footer>
  </body>
</html>
